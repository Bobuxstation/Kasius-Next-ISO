<html>

<head>
    <link href="../assets/inter.css" rel="stylesheet">
    <script src="../scripts/fontawesome.js"></script>
    <link rel="stylesheet" href="../assets/scroll.css" id="style">
    <link rel="stylesheet" href="WebDESDK.css" id="style">
    <style>
        #msg {
            outline: none;
            border: black solid 0px;
            width: 100%;
            height: 100%;
            resize: none;
            padding: 5px;
            font-family: Inter;
            font-size: 20px;
            background: lightgray;
            overflow: auto;
        }
    </style>
</head>

<body>
    <input type="file" id="file-input" onchange="loadFileAsText()" hidden>
    <ul class="ul" id="controls">
        <li class="dropdown li">
            <a class="dropbtn">
                <span>File</span>
            </a>
            <div class="dropdown-content">
                <a onclick="document.getElementById('file-input').click();"><span>Open</span></a>
                <a onclick="saveTXT('Untitled.txt');"><span>Save</span></a>
            </div>
        </li>
        <li class="dropdown li">
            <a class="dropbtn">
                <span>Formatting</span>
            </a>
            <div class="dropdown-content">
                <a>
                    <input type="number" min="0" max="100" value="20"
                        onchange="document.getElementById('msg').style.fontSize = value">
                </a>
                <a>
                    <input type="color" onchange="document.getElementById('msg').style.color = value">
                </a>
                <a>
                    <select style="background: lightgray; width: 100%; padding: 5px; border-radius: 3px;" id="font"
                        onchange="fontTXT(value)">
                        <option style="font-family: Inter;">Inter</option>
                        <option style="font-family: Arial;">Arial</option>
                        <option style="font-family: Verdana;">Verdana</option>
                        <option style="font-family: Helvetica;">Helvetica</option>
                        <option style="font-family: Times New Roman;">Times New Roman</option>
                        <option style="font-family: Georgia;">Georgia</option>
                        <option style="font-family: Garamond;">Garamond</option>
                        <option style="font-family: Courier New;">Courier New</option>
                        <option style="font-family: Lucida Console;">Lucida Console</option>
                        <option style="font-family: Monaco;">Monaco</option>
                        <option style="font-family: Brush Script MT;">Brush Script MT</option>
                        <option style="font-family: Lucida Handwriting;">Lucida Handwriting</option>
                        <option style="font-family: Copperplate;">Copperplate</option>
                        <option style="font-family: Papyrus;">Papyrus</option>
                    </select>
                </a>
            </div>
        </li>
        <li class="dropdown li">
            <a class="dropbtn">
                <span>About</span>
            </a>
            <div class="dropdown-content">
                <a><span>Kasius-Next Notes</span></a>
                <a><span>Version 0.2.0</span></a>
            </div>
        </li>
    </ul>

    <section>
        <textarea id="msg"></textarea>
    </section>

    <script>
        let saveTXT = (filename) => {
            const msg = document.getElementById('msg');
            let data =
                '' + msg.value;

            const textToBLOB = new Blob([data], { type: 'text/plain' });
            const sFileName = filename;

            let newLink = document.createElement("a");
            newLink.download = sFileName;

            if (window.webkitURL != null) {
                newLink.href = window.webkitURL.createObjectURL(textToBLOB);
            }
            else {
                newLink.href = window.URL.createObjectURL(textToBLOB);
                newLink.style.display = "none";
                document.body.appendChild(newLink);
            }

            newLink.click();
        }

        function clearTXT() {
            document.getElementById('msg').value = "";
        }

        function fontTXT(FONT) {
            document.getElementById('msg').style.fontFamily = FONT;
        }

        function showsave() {
            var x = document.getElementById("notessaveprompt");
            if (x.style.display === "none") {
                document.getElementById("notessaveprompt1").style.display = "none";
                document.getElementById("notessaveprompt2").style.display = "none";
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        function setTXT() {
            var x = document.getElementById("notessaveprompt1");
            if (x.style.display === "none") {
                document.getElementById("notessaveprompt2").style.display = "none";
                document.getElementById("notessaveprompt").style.display = "none";
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        function showattr() {
            var x = document.getElementById("notessaveprompt2");
            if (x.style.display === "none") {
                document.getElementById("notessaveprompt1").style.display = "none";
                document.getElementById("notessaveprompt").style.display = "none";
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        function loadFileAsText() {
            var fileToLoad = document.getElementById("file-input").files[0];

            var fileReader = new FileReader();
            fileReader.onload = function (fileLoadedEvent) {
                var textFromFileLoaded = fileLoadedEvent.target.result;
                document.getElementById("msg").value = textFromFileLoaded;
            };
            fileReader.readAsText(fileToLoad, "UTF-8");
        }
    </script>
</body>

</html>